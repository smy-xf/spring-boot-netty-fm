<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title></title>
</head>
<body>
<div>发送消息：</div>
<input type="text" id="msgContent"/>
<input type="button" value="发送" onclick="CHAT.chat()"/>

<div>接受到的消息：</div>
<div id="receiveMesg" style="background-color: beige; border: 1px beige solid;"></div>

<script>
    window.CHAT = {
        websocket: null,
        init: function () {
            //判断当前浏览器是否支持websocket
            if (window.WebSocket) {
                CHAT.websocket = new WebSocket("ws://172.27.35.1:8088/ws");
                CHAT.websocket.onopen = function () {
                    console.log("连接建立成功。。。");
                },
                    CHAT.websocket.onclose = function () {
                        console.log("关闭连接成功。。。");
                    },
                    CHAT.websocket.onerror = function () {
                        console.log("发生错误。。。");
                    },
                    CHAT.websocket.onmessage = function (e) {
                        var receiveMesg = document.getElementById("receiveMesg");
                        var html = receiveMesg.innerHTML;
                        receiveMesg.innerHTML = html + "</br>" + e.data;
                    }
            } else {
                console.log("不支持");
            }
        },
        chat: function () {
            var msgContent = document.getElementById("msgContent");
            CHAT.websocket.send(msgContent.value);
        }
    };
    CHAT.init();
</script>
</body>
</html>